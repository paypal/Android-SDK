buildscript {

    ext.modules = [
            "sdkVersionName": "0.0.0-test-sdk",
            "sdkVersionCode": 1,
            "androidMinSdkVersion": 21,
            "androidTargetVersion": 30
    ]

    ext.versions = [
            "kotlin": "1.5.21"
    ]
    ext.deps = [
            // Kotlin
            "kotlinStdLib"        : "org.jetbrains.kotlin:kotlin-stdlib:${versions.kotlin}",

            // Android
            "androidxCoreKtx"             : "androidx.core:core-ktx:1.6.0",
            "androidxAppcompat"           : "androidx.appcompat:appcompat:1.3.1",
            "material"                    : "com.google.android.material:material:1.4.0",
            "constraintLayout"            : "androidx.constraintlayout:constraintlayout:2.1.0",
            "kotlinxAndroidCoroutines"    : "org.jetbrains.kotlinx:kotlinx-coroutines-android:1.5.0",
            "androidxLifecycleRuntimeKtx" : "androidx.lifecycle:lifecycle-runtime-ktx:2.3.1",

            // Testing
            "junit"                        : "junit:junit:4.13.2",
            "androidxJUnit"                : "androidx.test.ext:junit:1.1.3",
            "androidxEspressoCore"         : "androidx.test.espresso:espresso-core:3.4.0",
            "mockk"                        : "io.mockk:mockk:1.12.0",
            "kotlinxAndroidCoroutinesTest" : "org.jetbrains.kotlinx:kotlinx-coroutines-test:1.5.0"
    ]

    repositories {
        google()
    }
    dependencies {
        classpath "com.android.tools.build:gradle:7.0.0"
        classpath "org.jetbrains.kotlin:kotlin-gradle-plugin:${versions.kotlin}"
        classpath "com.dicedmelon.gradle:jacoco-android:0.1.5"
    }
}

plugins {
    id "io.gitlab.arturbosch.detekt" version "${detektVersion}"
}

allprojects {
    repositories {
        google()
        mavenCentral()
    }
}

task clean(type: Delete) {
    delete rootProject.buildDir
}

dependencies {
    detektPlugins "io.gitlab.arturbosch.detekt:detekt-formatting:${detektVersion}"
}

detekt {
    toolVersion = detektVersion
    config = files("detekt/detekt-config.yml")
    input = files(
            "Core/src",
            "Card/src",
            "Demo/src"
    )
    autoCorrect = project.hasProperty('detektAutoCorrect')
    reports {
        html {
            enabled = true
            destination = file("build/reports/detekt_report.html")
        }
    }
}

subprojects {
    group = "com.paypal.android"
}
